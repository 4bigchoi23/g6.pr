{% extends "admin/base.html" %}

{% block title %}
    게시판관리
{% endblock %}

{% block content %}

<h1 id="container_title">게시판그룹설정</h1>
<div class="container_wr">
<div class="local_ov01 local_ov">
    <a href="/admin/boardgroup_list" class="ov_listall">처음</a>    
    <span class="btn_ov01"><span class="ov_txt">전체그룹</span><span class="ov_num"> 1개</span></span>
</div>

<form name="fsearch" id="fsearch" class="local_sch01 local_sch" method="get">
    <label for="sfl" class="sound_only">검색대상</label>
    <select name="sfl" id="sfl">
        <option value="gr_subject" >제목</option>
        <option value="gr_id" >ID</option>
        <option value="gr_admin" >그룹관리자</option>
    </select>
    <label for="stx" class="sound_only">검색어<strong class="sound_only"> 필수</strong></label>
    <input type="text" name="stx" id="stx" value="" required class="required frm_input">
    <input type="submit" value="검색" class="btn_submit">
</form>


<form name="fboardgrouplist" id="fboardgrouplist" action="/admin/boardgroup_list_update" onsubmit="return fboardgrouplist_submit(this);" method="post">
    <input type="hidden" name="sst" value="">
    <input type="hidden" name="sod" value="">
    <input type="hidden" name="sfl" value="">
    <input type="hidden" name="stx" value="">
    <input type="hidden" name="page" value="1">
    <input type="hidden" name="token" value="{{ token }}">

    <div class="tbl_head01 tbl_wrap">
        <table>
            <caption>게시판그룹설정 목록</caption>
            <thead>
                <tr>
                    <th scope="col">
                        <label for="chkall" class="sound_only">그룹 전체</label>
                        <input type="checkbox" name="chkall" value="1" id="chkall" onclick="check_all(this.form)">
                    </th>
                    <th scope="col"><a href="/admin/boardgroup_list?sst=gr_id&sod=asc&sfl=&stx=&sca=&page=1">그룹아이디</a></th>
                    <th scope="col"><a href="/admin/boardgroup_list?sst=gr_subject&sod=asc&sfl=&stx=&sca=&page=1">제목</a></th>
                    <th scope="col"><a href="/admin/boardgroup_list?sst=gr_admin&sod=asc&sfl=&stx=&sca=&page=1">그룹관리자</a></th>
                    <th scope="col">게시판</th>
                    <th scope="col">접근<br>사용</th>
                    <th scope="col">접근<br>회원수</th>
                    <th scope="col"><a href="/admin/boardgroup_list?sst=gr_order&sod=asc&sfl=&stx=&sca=&page=1">출력<br>순서</a></th>
                    <th scope="col">접속기기</th>
                    <th scope="col">관리</th>
                </tr>
            </thead>
            <tbody>
                {% for group in groups %}                
                <tr class="bg0">
                    <td class="td_chk">
                        <input type="hidden" name="group_id[{{ loop.index0 }}]" value="{{ group.gr_id }}">
                        <label for="chk_{{ loop.index0 }}" class="sound_only">{{ group.gr_subject }} 그룹</label>
                        <input type="checkbox" name="chk[]" value="0" id="chk_{{ loop.index0 }}">
                    </td>
                    <td class="td_left"><a href="/bbs/group/{{ group.gr_id }}">{{ group.gr_subject }}</a></td>
                    <td class="td_input">
                        <label for="gr_subject_{{ loop.index0 }}" class="sound_only">그룹제목</label>
                        <input type="text" name="gr_subject[{{ loop.index0 }}]" value="{{ group.gr_subject }}" id="gr_subject_{{ loop.index0 }}" class="tbl_input">
                    </td>
                    <td class="td_mng td_input">
                        <label for="gr_admin_{{ loop.index0 }}" class="sound_only">그룹관리자</label>
                        <input type="text" name="gr_admin[{{ loop.index0 }}]" value="{{ group.gr_admin }}" id="gr_admin_{{ loop.index0 }}" class="tbl_input" size="10" maxlength="20">
                    </td>
                    <td class="td_num"><a href="/admin/board_list?sfl=a.gr_id&amp;stx={{ group.gr_id}}">5</a></td>
                    <td class="td_numsmall">
                        <label for="gr_use_access_{{ loop.index0 }}" class="sound_only">접근회원 사용</label>
                        <input type="checkbox" name="gr_use_access[{{ loop.index0 }}]"  value="1" id="gr_use_access_{{ loop.index0 }}" {{ 'checked' if group.gr_use_access }}>
                    </td>
                    <td class="td_num"><a href="/admin/boardgroupmember_list?gr_id={{ group.gr_id }}">0</a></td>
                    <td class="td_numsmall">
                        <label for="gr_order_{{ loop.index0 }}" class="sound_only">메인메뉴 출력순서</label>
                        <input type="text" name="gr_order[{{ loop.index0 }}]" value="{{ group.gr_order }}" id="gr_order_{{ loop.index0 }}" class="tbl_input" size="2">
                    </td>
                    <td class="td_mng">
                        <label for="gr_device_{{ loop.index0 }}" class="sound_only">접속기기</label>
                        <select name="gr_device[{{ loop.index0 }}]" id="gr_device_{{ loop.index0 }}">
                            <option value="both"  selected="selected">모두</option>
                            <option value="pc" >PC</option>
                            <option value="mobile" >모바일</option>
                        </select>
                    </td>
                    <td class="td_mng td_mng_s"><a href="/admin/boardgroup_form/{{ group.gr_id }}?sst=&amp;sod=&amp;sfl=&amp;stx=&amp;page=&amp;" class="btn_03 btn">수정</a></td>
                </tr>
                {% endfor %}
                {% if not groups %}
                <tr><td colspan="10">자료가 없습니다.</td></tr>
                {% endif %}
            </tbody>
        </table>
    </div>

    <div class="btn_fixed_top">
        <input type="submit" name="act_button" onclick="document.pressed=this.value" value="선택수정" class="btn btn_02">
        <input type="submit" name="act_button" onclick="document.pressed=this.value" value="선택삭제" class="btn btn_02">
        <a href="/admin/boardgroup_form" class="btn btn_01">게시판그룹 추가</a>
    </div>
</form>

<div class="local_desc01 local_desc">
    <p>
        접근사용 옵션을 설정하시면 관리자가 지정한 회원만 해당 그룹에 접근할 수 있습니다.<br>
        접근사용 옵션은 해당 그룹에 속한 모든 게시판에 적용됩니다.
    </p>
</div>


<script>
    function fboardgrouplist_submit(f) {
        if (!is_checked("chk[]")) {
            alert(document.pressed + " 하실 항목을 하나 이상 선택하세요.");
            return false;
        }

        if (document.pressed == "선택삭제") {
            if (!confirm("선택한 자료를 정말 삭제하시겠습니까?")) {
                return false;
            }
        }

        return true;
    }
</script>


<noscript>
    <p>
        귀하께서 사용하시는 브라우저는 현재 <strong>자바스크립트를 사용하지 않음</strong>으로 설정되어 있습니다.<br>
        <strong>자바스크립트를 사용하지 않음</strong>으로 설정하신 경우는 수정이나 삭제시 별도의 경고창이 나오지 않으므로 이점 주의하시기 바랍니다.
    </p>
</noscript>

</div>
{% endblock %}
