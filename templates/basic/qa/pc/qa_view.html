{% extends "base.html" %}

{% block subtitle %}
    {{ qa_config.qa_title }}
{% endblock subtitle %}

{% block content %}
    {% if qa_config.qa_content_head %}
        {{ qa_config.qa_content_head|safe }}
    {% endif %}

    <!-- 게시물 읽기 시작 { -->
    <article id="bo_v">
        <header>
            <h2 id="bo_v_title"><span class="bo_v_cate">{{ qa.qa_category }}</span> {{ qa.qa_subject }}</h2>
        </header>
        <section id="bo_v_info">
            <h2>페이지 정보</h2>
            <span class="sound_only">작성자</span>
            <strong> {{ qa.qa_name }}</strong>
            <span class="sound_only">작성일</span>
            <strong class="bo_date"><i class="fa fa-clock-o" aria-hidden="true"></i> {{ qa.qa_datetime }}</strong>
            {% if qa.qa_email %}
                <span class="sound_only">이메일</span>
                <strong><i class="fa fa-envelope-o" aria-hidden="true"></i> {{ qa.qa_email }}</strong>
            {% endif %}
            {% if qa.qa_hp %}
                <span class="sound_only">휴대폰</span>
                <strong><i class="fa fa-phone" aria-hidden="true"></i> {{ qa.qa_hp }}</strong>
            {% endif %}
            <!-- 게시물 상단 버튼 시작 { -->
            <div id="bo_v_top">
                <ul class="bo_v_com">
                    <li>
                        <a href="{{ url_for('qa_list') }}?{{ generate_query_string(request) }}" class="btn_b01 btn" title="목록">
                            <i class="fa fa-list" aria-hidden="true"></i>
                            <span class="sound_only">목록</span>
                        </a>
                    </li>
                    <li>
                        <a href="{{ url_for('qa_write') }}" class="btn_b01 btn" title="글쓰기">
                            <i class="fa fa-pencil" aria-hidden="true"></i>
                            <span class="sound_only">글쓰기</span>
                        </a>
                    </li>
                    <li>
                        <button type="button" class="btn_more_opt btn_b01 btn" title="게시판 읽기 옵션">
                            <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                            <span class="sound_only">게시판 읽기 옵션</span>
                        </button>
                        <ul class="more_opt" style="display: none;">
                            <li>
                                <a href="{{ url_for('qa_edit', qa_id=qa.qa_id) }}" class="btn_b01 btn" title="수정">
                                    수정
                                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a href="{{ url_for('qa_delete', qa_id=qa.qa_id) }}?token={{ generate_one_time_token('delete') }}" class="btn_b01 btn" onclick="del(this.href); return false;" title="삭제">
                                    삭제
                                    <i class="fa fa-trash-o" aria-hidden="true"></i>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <script>
                    // 게시판 리스트 옵션
                    $(".btn_more_opt").on("click", function() {
                        $(".more_opt").toggle();
                    })
                </script>
            </div>
            <!-- } 게시물 상단 버튼 끝 -->
        </section>

        <section id="bo_v_atc">
            <h2 id="bo_v_atc_title">본문</h2>
            {# TODO: 이미지 처리 필요 #}
            <div id="bo_v_img">
                <a href="" target="_blank" class="view_image">
                    <img src="http://127.0.0.1/g5-update/data/qa/7b018c827432d9b37a214761cfb43782_voINFiPa_9db51211e2ed207fa569cdbbf2ced47a53686708.gif" width="58">
                </a>
            </div>
            <!-- 본문 내용 시작 { -->
            <div id="bo_v_con">{{ qa.qa_content|safe }}</div>
            <!-- } 본문 내용 끝 -->
            
            <!-- 첨부파일 시작 { -->
            {# TODO: 첨부파일 처리 필요 #}
            <section id="bo_v_file">
                <h2>첨부파일</h2>
                <ul>
                    <li>
                        <i class="fa fa-download" aria-hidden="true"></i>
                        <a href="http://127.0.0.1/g5-update/bbs/qadownload.php?qa_id=11&amp;no=2" class="view_file_download" download="">
                            <strong>test_mp3.mp3</strong>
                        </a>
                    </li>
                </ul>
            </section>
            <!-- } 첨부파일 끝 -->
        </section>

        <ul class="bo_v_nb">
            <li>
                {% if prev %}
                    <a href="{{ url_for('qa_view', qa_id=prev.qa_id) }}?{{ generate_query_string(request) }}" class="btn_b01 btn">
                        <i class="fa fa-chevron-left" aria-hidden="true"></i> 이전글
                    </a>
                {% endif %}
            </li>
            <li>
                {% if next %}
                    <a href="{{ url_for('qa_view', qa_id=next.qa_id) }}?{{ generate_query_string(request) }}" class="btn_b01 btn">
                        다음글 <i class="fa fa-chevron-right" aria-hidden="true"></i>
                    </a>
                {% endif %}
            </li>
        </ul>

        {% if answer %}
            <section id="bo_v_ans">
                <h2><span class="bo_v_reply">답변</span> {{ answer.qa_subject }}</h2>
                <header>
                    <div id="ans_datetime">
                        <i class="fa fa-clock-o" aria-hidden="true"></i> {{ answer.qa_datetime }}
                    </div>
                    {# TODO: 관리자만 보이도록 수정 #}
                    <div id="ans_add">
                        <button type="button" class="btn_more_add btn_more_opt btn_b01 btn" title="답변 옵션"><i class="fa fa-ellipsis-v" aria-hidden="true"></i><span class="sound_only">답변 옵션</span></button>
                        <ul class="more_add">
                            <li><a href="{{ url_for('qa_edit', qa_id=answer.qa_id) }}" class="btn_b01 btn" title="답변수정">답변수정</a></li>
                            <li><a href="{{ url_for('qa_delete', qa_id=answer.qa_id) }}?token={{ generate_one_time_token('delete') }}" class="btn_b01 btn" onclick="del(this.href); return false;" title="답변삭제">답변삭제</a></li>
                        </ul>
                    </div>
                    <script>
                        // 답변하기 옵션
                        $(".btn_more_add").on("click", function() {
                            $(".more_add").toggle();
                        })
                    </script>
                </header>

                <div id="ans_con">
                    {# TODO: 이미지 처리 필요 #}
                    <div id="bo_v_img">
                        <a href="http://127.0.0.1/g5-update/bbs/view_image.php?fn=%2Fdata%2Fqa%2F7b018c827432d9b37a214761cfb43782_VEDfhxSv_284eac5e5b56bc442a6a60551480fc65a8a3f048.gif" target="_blank" class="view_image"><img src="http://127.0.0.1/g5-update/data/qa/7b018c827432d9b37a214761cfb43782_VEDfhxSv_284eac5e5b56bc442a6a60551480fc65a8a3f048.gif" title=""></a>
                    </div>
                    {{ answer.qa_content|safe }}
                    <!-- 첨부파일 시작 { -->
                    {# TODO: 첨부파일 처리 필요 #}
                    <section id="bo_v_file">
                        <h2>첨부파일</h2>
                        <ul>
                            <li>
                                <i class="fa fa-download" aria-hidden="true"></i>
                                <a href="http://127.0.0.1/g5-update/bbs/qadownload.php?qa_id=12&amp;no=2" class="view_file_download" download="">
                                    <strong>test_mp3.mp3</strong>
                                </a>
                            </li>
                        </ul>
                    </section>
                    <!-- } 첨부파일 끝 -->
                </div>

            </section>
            <div class="bo_v_btn">
                <a href="{{ url_for('qa_write') }}?qa_related={{ qa.qa_id }}" class="add_qa" title="추가질문">추가질문</a>  
            </div>
        {% else %}

        {% endif %}
    </article>
    <!-- } 게시판 읽기 끝 -->
    <script src="http://127.0.0.1/g5-update/js/viewimageresize.js"></script>
    <script>
    $(function() {
        $("a.view_image").click(function() {
            window.open(this.href, "large_image", "location=yes,links=no,toolbar=no,top=10,left=10,width=10,height=10,resizable=yes,scrollbars=no,status=no");
            return false;
        });

        // 이미지 리사이즈
        $("#bo_v_atc").viewimageresize();
    });
    </script>

    {% if qa_config.qa_content_tail %}
        {{ qa_config.qa_content_tail|safe }}
    {% endif %}
{% endblock content %}